{  
    "processes": {

        "testInterval0": {
            "triggers": [
                { 
                    "condition": { "expr": "not ${/proc/testInterval0/dmap/stop}" },
                    "interval": { "expr": "${/proc/testInterval0/dmap/interval}" }
                }
            ],
            "dataMap": {
                "interval": { "type": "number", "default": 6.25 },
                "iterations": { "type": "number", "default": 1600 },
                "startTs": { "type": "number" },
                "ts": { "type": "number" },
                "drift": { "type": "number" },
                "simTime": { "type": "number" },
                "counter": { "type": "number" },   
                "warmup": { "type": "number", "default": 3000 },                          
                "cntBias": { "type": "number" },                        
                "avg": { "type": "number" },
                "stop": { "type": "boolean" }
            },
            "instructions": [
                {
                    "move": {
                        "from": { "expression": { "expr": "${/dt/unix}" }},
                        "to": { "pointer": "/proc/testInterval0/dmap/ts" }
                    }
                },
                {
                    "ifelse": {
                        "if": {
                            "condition": { "expr": "${/proc/testInterval0/dmap/cntBias} < 1" },
                            "instructions": [
                                {
                                    "move": {
                                        "from": { "expression": { "expr": "${/proc/testInterval0/dmap/warmup} / ${/proc/testInterval0/dmap/interval}" }},
                                        "to": { "pointer": "/proc/testInterval0/dmap/cntBias" }
                                    }
                                }
                            ]
                        }
                    }
                },
                {
                    "move": {
                        "from": { "expression": { "expr": "${/proc/testInterval0/dmap/counter} + 1" }},
                        "to": { "pointer": "/proc/testInterval0/dmap/counter" }
                    }
                },
                {
                    "ifelse": {
                        "if": {
                            "condition": { "expr": "${/proc/testInterval0/dmap/counter} > ${/proc/testInterval0/dmap/cntBias} and ${/proc/testInterval0/dmap/startTs} == 0" },
                            "instructions": [
                                {
                                    "move": {
                                        "from": { "pointer": "/proc/testInterval0/dmap/ts" },
                                        "to": { "pointer": "/proc/testInterval0/dmap/startTs" }
                                    }
                                }
                            ]
                        },
                        "elif": [
                            {
                                "condition": { "expr": "${/proc/testInterval0/dmap/counter} > (${/proc/testInterval0/dmap/iterations} + ${/proc/testInterval0/dmap/cntBias})" },
                                "instructions": [
                                    {
                                        "move": {
                                            "from": { "expression": { "expr": "(${/proc/testInterval0/dmap/ts} - ${/proc/testInterval0/dmap/startTs})" }},
                                            "to": { "pointer": "/proc/testInterval0/dmap/simTime" }
                                        }
                                    },
                                    {
                                        "move": {
                                            "from": { "expression": { "expr": "${/proc/testInterval0/dmap/simTime} / ${/proc/testInterval0/dmap/iterations}" }},
                                            "to": { "pointer": "/proc/testInterval0/dmap/avg" }
                                        }
                                    },
                                    {
                                        "move": {
                                            "from": { "expression": { "expr": "${/proc/testInterval0/dmap/simTime} - (${/proc/testInterval0/dmap/iterations} * ${/proc/testInterval0/dmap/interval})" }},
                                            "to": { "pointer": "/proc/testInterval0/dmap/drift" }
                                        }
                                    },
                                    {
                                        "move": {
                                            "from": { "compound": true },
                                            "to": { "pointer": "/proc/testInterval0/dmap/stop" }
                                        }
                                    },                          
                                    { "log": "3:\nTarget interval: ${/proc/testInterval0/dmap/interval}\nIterations: ${/proc/testInterval0/dmap/iterations}\nActual sim. time: ${/proc/testInterval0/dmap/simTime}\nActual avg. interval: ${/proc/testInterval0/dmap/avg}\nDrift: ${/proc/testInterval0/dmap/drift}" }
                                ]
                            }
                        ]
                    }
                }
            ]
        },

        "testInterval1": {
            "triggers": [
                { 
                    "condition": { "expr": "not ${/proc/testInterval1/dmap/stop}" },
                    "interval": { "expr": "${/proc/testInterval1/dmap/interval}" }
                }
            ],
            "dataMap": {
                "interval": { "type": "number", "default": 12.5 },
                "iterations": { "type": "number", "default": 800 },
                "startTs": { "type": "number" },
                "ts": { "type": "number" },
                "drift": { "type": "number" },
                "simTime": { "type": "number" },
                "counter": { "type": "number" },   
                "warmup": { "type": "number", "default": 3000 },                          
                "cntBias": { "type": "number" },                        
                "avg": { "type": "number" },
                "stop": { "type": "boolean" }
            },
            "instructions": [
                {
                    "move": {
                        "from": { "expression": { "expr": "${/dt/unix}" }},
                        "to": { "pointer": "/proc/testInterval1/dmap/ts" }
                    }
                },
                {
                    "ifelse": {
                        "if": {
                            "condition": { "expr": "${/proc/testInterval1/dmap/cntBias} < 1" },
                            "instructions": [
                                {
                                    "move": {
                                        "from": { "expression": { "expr": "${/proc/testInterval1/dmap/warmup} / ${/proc/testInterval1/dmap/interval}" }},
                                        "to": { "pointer": "/proc/testInterval1/dmap/cntBias" }
                                    }
                                }
                            ]
                        }
                    }
                },
                {
                    "move": {
                        "from": { "expression": { "expr": "${/proc/testInterval1/dmap/counter} + 1" }},
                        "to": { "pointer": "/proc/testInterval1/dmap/counter" }
                    }
                },
                {
                    "ifelse": {
                        "if": {
                            "condition": { "expr": "${/proc/testInterval1/dmap/counter} > ${/proc/testInterval1/dmap/cntBias} and ${/proc/testInterval1/dmap/startTs} == 0" },
                            "instructions": [
                                {
                                    "move": {
                                        "from": { "pointer": "/proc/testInterval1/dmap/ts" },
                                        "to": { "pointer": "/proc/testInterval1/dmap/startTs" }
                                    }
                                }
                            ]
                        },
                        "elif": [
                            {
                                "condition": { "expr": "${/proc/testInterval1/dmap/counter} > (${/proc/testInterval1/dmap/iterations} + ${/proc/testInterval1/dmap/cntBias})" },
                                "instructions": [                                    
                                    {
                                        "move": {
                                            "from": { "expression": { "expr": "(${/proc/testInterval1/dmap/ts} - ${/proc/testInterval1/dmap/startTs})" }},
                                            "to": { "pointer": "/proc/testInterval1/dmap/simTime" }
                                        }
                                    },
                                    {
                                        "move": {
                                            "from": { "expression": { "expr": "${/proc/testInterval1/dmap/simTime} / ${/proc/testInterval1/dmap/iterations}" }},
                                            "to": { "pointer": "/proc/testInterval1/dmap/avg" }
                                        }
                                    },
                                    {
                                        "move": {
                                            "from": { "expression": { "expr": "${/proc/testInterval1/dmap/simTime} - (${/proc/testInterval1/dmap/iterations} * ${/proc/testInterval1/dmap/interval})" }},
                                            "to": { "pointer": "/proc/testInterval1/dmap/drift" }
                                        }
                                    },
                                    {
                                        "move": {
                                            "from": { "compound": true },
                                            "to": { "pointer": "/proc/testInterval1/dmap/stop" }
                                        }
                                    },                          
                                    { "log": "1:\nTarget interval: ${/proc/testInterval1/dmap/interval}\nIterations: ${/proc/testInterval1/dmap/iterations}\nActual sim. time: ${/proc/testInterval1/dmap/simTime}\nActual avg. interval: ${/proc/testInterval1/dmap/avg}\nDrift: ${/proc/testInterval1/dmap/drift}" }
                                ]
                            }
                        ]
                    }
                }
            ]
        },


        "testInterval2": {
            "triggers": [
                { 
                    "condition": { "expr": "not ${/proc/testInterval2/dmap/stop}" },
                    "interval": { "expr": "${/proc/testInterval2/dmap/interval}" }
                }
            ],
            "dataMap": {
                "interval": { "type": "number", "default": 25 },
                "iterations": { "type": "number", "default": 400 },
                "startTs": { "type": "number" },
                "ts": { "type": "number" },
                "drift": { "type": "number" },
                "simTime": { "type": "number" },
                "counter": { "type": "number" },   
                "warmup": { "type": "number", "default": 3000 },                          
                "cntBias": { "type": "number" },                        
                "avg": { "type": "number" },
                "stop": { "type": "boolean" }
            },
            "instructions": [
                {
                    "move": {
                        "from": { "expression": { "expr": "${/dt/unix}" }},
                        "to": { "pointer": "/proc/testInterval2/dmap/ts" }
                    }
                },
                {
                    "ifelse": {
                        "if": {
                            "condition": { "expr": "${/proc/testInterval2/dmap/cntBias} < 1" },
                            "instructions": [
                                {
                                    "move": {
                                        "from": { "expression": { "expr": "${/proc/testInterval2/dmap/warmup} / ${/proc/testInterval2/dmap/interval}" }},
                                        "to": { "pointer": "/proc/testInterval2/dmap/cntBias" }
                                    }
                                }                                
                            ]
                        }
                    }
                },
                {
                    "move": {
                        "from": { "expression": { "expr": "${/proc/testInterval2/dmap/counter} + 1" }},
                        "to": { "pointer": "/proc/testInterval2/dmap/counter" }
                    }
                },
                {
                    "ifelse": {
                        "if": {
                            "condition": { "expr": "${/proc/testInterval2/dmap/counter} > ${/proc/testInterval2/dmap/cntBias} and ${/proc/testInterval2/dmap/startTs} == 0" },
                            "instructions": [
                                {
                                    "move": {
                                        "from": { "pointer": "/proc/testInterval2/dmap/ts" },
                                        "to": { "pointer": "/proc/testInterval2/dmap/startTs" }
                                    }
                                }
                            ]
                        },
                        "elif": [
                            {
                                "condition": { "expr": "${/proc/testInterval2/dmap/counter} > (${/proc/testInterval2/dmap/iterations} + ${/proc/testInterval2/dmap/cntBias})" },
                                "instructions": [
                                    {
                                        "move": {
                                            "from": { "expression": { "expr": "(${/proc/testInterval2/dmap/ts} - ${/proc/testInterval2/dmap/startTs})" }},
                                            "to": { "pointer": "/proc/testInterval2/dmap/simTime" }
                                        }
                                    },
                                    {
                                        "move": {
                                            "from": { "expression": { "expr": "${/proc/testInterval2/dmap/simTime} / ${/proc/testInterval2/dmap/iterations}" }},
                                            "to": { "pointer": "/proc/testInterval2/dmap/avg" }
                                        }
                                    },
                                    {
                                        "move": {
                                            "from": { "expression": { "expr": "${/proc/testInterval2/dmap/simTime} - (${/proc/testInterval2/dmap/iterations} * ${/proc/testInterval2/dmap/interval})" }},
                                            "to": { "pointer": "/proc/testInterval2/dmap/drift" }
                                        }
                                    },
                                    {
                                        "move": {
                                            "from": { "compound": true },
                                            "to": { "pointer": "/proc/testInterval2/dmap/stop" }
                                        }
                                    },                          
                                    { "log": "2:\nTarget interval: ${/proc/testInterval2/dmap/interval}\nIterations: ${/proc/testInterval2/dmap/iterations}\nActual sim. time: ${/proc/testInterval2/dmap/simTime}\nActual avg. interval: ${/proc/testInterval2/dmap/avg}\nDrift: ${/proc/testInterval2/dmap/drift}" }
                                ]
                            }
                        ]
                    }
                }
            ]
        },


        "testInterval3": {
            "triggers": [
                { 
                    "condition": { "expr": "not ${/proc/testInterval3/dmap/stop}" },
                    "interval": { "expr": "${/proc/testInterval3/dmap/interval}" }
                }
            ],
            "dataMap": {
                "interval": { "type": "number", "default": 50 },
                "iterations": { "type": "number", "default": 200 },
                "startTs": { "type": "number" },
                "ts": { "type": "number" },
                "drift": { "type": "number" },
                "simTime": { "type": "number" },
                "counter": { "type": "number" },   
                "warmup": { "type": "number", "default": 3000 },                          
                "cntBias": { "type": "number" },                        
                "avg": { "type": "number" },
                "stop": { "type": "boolean" }
            },
            "instructions": [
                {
                    "move": {
                        "from": { "expression": { "expr": "${/dt/unix}" }},
                        "to": { "pointer": "/proc/testInterval3/dmap/ts" }
                    }
                },
                {
                    "ifelse": {
                        "if": {
                            "condition": { "expr": "${/proc/testInterval3/dmap/cntBias} < 1" },
                            "instructions": [
                                {
                                    "move": {
                                        "from": { "expression": { "expr": "${/proc/testInterval3/dmap/warmup} / ${/proc/testInterval3/dmap/interval}" }},
                                        "to": { "pointer": "/proc/testInterval3/dmap/cntBias" }
                                    }
                                }
                            ]
                        }
                    }
                },
                {
                    "move": {
                        "from": { "expression": { "expr": "${/proc/testInterval3/dmap/counter} + 1" }},
                        "to": { "pointer": "/proc/testInterval3/dmap/counter" }
                    }
                },
                {
                    "ifelse": {
                        "if": {
                            "condition": { "expr": "${/proc/testInterval3/dmap/counter} > ${/proc/testInterval3/dmap/cntBias} and ${/proc/testInterval3/dmap/startTs} == 0" },
                            "instructions": [
                                {
                                    "move": {
                                        "from": { "pointer": "/proc/testInterval3/dmap/ts" },
                                        "to": { "pointer": "/proc/testInterval3/dmap/startTs" }
                                    }
                                }
                            ]
                        },
                        "elif": [
                            {
                                "condition": { "expr": "${/proc/testInterval3/dmap/counter} > (${/proc/testInterval3/dmap/iterations} + ${/proc/testInterval3/dmap/cntBias})" },
                                "instructions": [
                                    {
                                        "move": {
                                            "from": { "expression": { "expr": "(${/proc/testInterval3/dmap/ts} - ${/proc/testInterval3/dmap/startTs})" }},
                                            "to": { "pointer": "/proc/testInterval3/dmap/simTime" }
                                        }
                                    },
                                    {
                                        "move": {
                                            "from": { "expression": { "expr": "${/proc/testInterval3/dmap/simTime} / ${/proc/testInterval3/dmap/iterations}" }},
                                            "to": { "pointer": "/proc/testInterval3/dmap/avg" }
                                        }
                                    },
                                    {
                                        "move": {
                                            "from": { "expression": { "expr": "${/proc/testInterval3/dmap/simTime} - (${/proc/testInterval3/dmap/iterations} * ${/proc/testInterval3/dmap/interval})" }},
                                            "to": { "pointer": "/proc/testInterval3/dmap/drift" }
                                        }
                                    },
                                    {
                                        "move": {
                                            "from": { "compound": true },
                                            "to": { "pointer": "/proc/testInterval3/dmap/stop" }
                                        }
                                    },                          
                                    { "log": "3:\nTarget interval: ${/proc/testInterval3/dmap/interval}\nIterations: ${/proc/testInterval3/dmap/iterations}\nActual sim. time: ${/proc/testInterval3/dmap/simTime}\nActual avg. interval: ${/proc/testInterval3/dmap/avg}\nDrift: ${/proc/testInterval3/dmap/drift}" }
                                ]
                            }
                        ]
                    }
                }
            ]
        }
    }
}